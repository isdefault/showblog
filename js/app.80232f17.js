(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/showblog/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0480":function(t,e,n){"use strict";n("44c9")},"049d":function(t,e,n){"use strict";n("05cb")},"05cb":function(t,e,n){},"07fe":function(t,e,n){"use strict";n("62a8")},"0c74":function(t,e,n){},"10dd":function(t,e,n){"use strict";n("0c74")},1100:function(t,e,n){t.exports=n.p+"img/background.7ebb9ab5.jpg"},1276:function(t,e,n){"use strict";n("7254")},"1ab3":function(t,e,n){},"1baa":function(t,e,n){},"1f26":function(t,e,n){"use strict";n("8ee1")},"1fd6":function(t,e,n){"use strict";n("6fe5")},"21fd":function(t,e,n){"use strict";n("62ef")},"286b":function(t,e,n){"use strict";n("450b")},"28c6":function(t,e,n){"use strict";n("35e0")},"305e":function(t,e,n){"use strict";n("b5d0")},3260:function(t,e,n){"use strict";n("efac")},"35e0":function(t,e,n){},"3a6b":function(t,e,n){},"3ff4":function(t,e,n){"use strict";n("77b0")},"44c9":function(t,e,n){},"450b":function(t,e,n){},"513f":function(t,e,n){t.exports=n.p+"img/portrait2.abed058c.webp"},"539b":function(t,e,n){"use strict";n("952f")},5611:function(t,e,n){},"567c":function(t,e,n){t.exports=n.p+"img/portrait6.20b6e52b.webp"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",attrs:{id:"app"}},[n("HomePageSlot",{scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"siteAside"},[n("SiteAside")],1)]},proxy:!0},{key:"main",fn:function(){return[n("RouterView")]},proxy:!0}])})],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"HomPageSlot"},[n("div",{staticClass:"left"},[t._t("left")],2),n("div",{class:{main:!0,mainisoverflow:!1}},[t._t("main")],2),n("div",{staticClass:"right"},[t._t("right")],2)])},o=[],c={data:function(){return{}},destroyed:function(){this.$store.commit("mainPageStore/setIsoverflow"),console.log(6)}},l=c,u=(n("6f0e"),n("2877")),p=Object(u["a"])(l,s,o,!1,null,"56b14d98",null),d=p.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SiteAside SiteAside-container"},[n("protrait",{attrs:{src:"/showblog/image/portraitmy.jpg",width:"150px",height:"150px"}}),n("contact"),n("mymenu")],1)},g=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticClass:"portrait portrait-container",style:{width:t.width,height:t.height},attrs:{src:t.src,alt:""}})},f=[],b={props:{src:{type:String,require:!0},width:{type:String,require:!0},height:{type:String,require:!0}}},v=b,y=(n("539b"),Object(u["a"])(v,h,f,!1,null,"2334759e",null)),w=y.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact contact-container"},[n("ul",[n("li",[n("a",{attrs:{href:""}},[n("icon",{attrs:{type:"weixin"}}),n("span",[t._v(t._s(t.data&&t.data.weixin))])],1)]),n("li",[n("a",{attrs:{href:""}},[n("icon",{attrs:{type:"qq"}}),n("span",[t._v(t._s(t.data&&t.data.qq))])],1)]),n("li",[n("a",{attrs:{href:""}},[n("icon",{attrs:{type:"github"}}),n("span",[t._v(t._s(t.data&&t.data.github))])],1)]),n("li",[n("a",{attrs:{href:""}},[n("icon",{attrs:{type:"mail"}}),n("span",[t._v(t._s(t.data&&t.data.mail))])],1)])])])},C=[],j=n("5530"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{staticClass:"iconfont icon-container",class:t.getIcon})},k=[],S={home:"icon-gongzuotai",success:"icon-chenggong",error:"icon-shibai",close:"iconguanbi",warn:"iconjinggao",info:"icon-wenzhang",blog:"iconblog",code:"icon-xiangmu",about:"icon-guanyu",weixin:"icon-weixin",mail:"icon-youjian",github:"icon-github",qq:"icon-qq",arrowUp:"icon-shang",arrowDown:"icon-xia",empty:"iconempty",chat:"icon-icon-test"},O={props:{type:{type:String,require:!0}},computed:{getIcon:function(){return S[this.type]}}},$=O,P=(n("7455"),Object(u["a"])($,_,k,!1,null,null,null)),T=P.exports,A=n("2f62"),D={components:{icon:T},computed:Object(j["a"])({},Object(A["b"])("setting",["data"]))},R=D,E=(n("6f86"),Object(u["a"])(R,x,C,!1,null,"213d8dd3",null)),L=E.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mymenu mymenu-container"},[n("ul",t._l(t.items,(function(e){return n("li",{key:e.link},[n("router-link",{attrs:{to:e.link,exact:e.exact}},[n("icon",{attrs:{type:e.icon}}),n("span",{staticStyle:{color:"#d3d3cb"}},[t._v(t._s(e.title))])],1)],1)})),0)])},I=[],M={components:{icon:T},data:function(){return{items:[{link:"/",icon:"home",title:"首页",exact:!0},{link:"/blog",icon:"info",title:"文章",exact:!1,startStr:!0},{link:"/about",icon:"about",title:"关于我",exact:!0},{link:"/project",icon:"code",title:"项目&效果",exact:!0},{link:"/message",icon:"chat",title:"留言板",exact:!0}]}},methods:{}},N=M,H=(n("c0dd"),Object(u["a"])(N,q,I,!1,null,"3ce8c9f2",null)),B=H.exports,z=n("99c9"),W=n.n(z),G={components:{protrait:w,contact:L,mymenu:B},data:function(){return{my:W.a}}},F=G,J=(n("3260"),Object(u["a"])(F,m,g,!1,null,null,null)),X=J.exports,Y={name:"App",components:{HomePageSlot:d,SiteAside:X}},K=Y,U=(n("bd61"),Object(u["a"])(K,i,r,!1,null,"85f5fdbe",null)),Q=U.exports,V=n("8c4f"),Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"container",staticClass:"mainPage-container",on:{wheel:t.wheelChangePage}},[n("ul",{staticClass:"pages",style:{top:t.top}},t._l(t.datas,(function(e){return n("li",{key:e.id,style:{height:t.mainPageHeight+"px"}},[n("mainPage",{attrs:{src:e.bigImg,placeholder:e.midImg,title:e.title,description:e.description}})],1)})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.index,expression:"index!==0"}],staticClass:"arrow arrowUp",on:{click:function(e){return t.changePage(t.index-1)}}},[n("icon",{attrs:{type:"arrowUp"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.index!==t.datas.length-1,expression:"index!==datas.length-1"}],staticClass:"arrow arrowDown",on:{click:function(e){return t.changePage(t.index+1)}}},[n("icon",{attrs:{type:"arrowDown"}})],1),n("ul",{staticClass:"pagePoint"},t._l(t.datas,(function(e,a){return n("li",{key:e.id,class:{active:t.index===a},on:{click:function(e){return t.changePage(a)}}})})),0)])},tt=[],et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"mainPage",on:{mousemove:t.changeImagePosition}},[n("imageLoader",{ref:"image",style:"transform :translate("+t.imageTranslateX+"px,"+t.imageTranslateY+"px)",attrs:{src:t.src,placeholder:t.placeholder,duration:3},on:{loaded:t.showWords}}),n("h2",{ref:"title"},[t._v(t._s(t.title))]),n("h3",{ref:"description"},[t._v(t._s(t.description))])],1)},nt=[],at=(n("a4d3"),n("e01a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imageLoader imageLoader-container"},[n("img",{staticClass:"image",attrs:{src:t.src,alt:""},on:{load:t.imageonload}}),t.isloade?t._e():n("img",{staticClass:"image",class:{none:t.isloade},style:{transition:"all "+t.duration+"ms"},attrs:{src:t.placeholder,alt:""}})])}),it=[],rt=(n("a9e3"),{props:{src:{type:String,require:!0},placeholder:{type:String,require:!0},duration:{type:Number,default:3}},data:function(){return{imgloade:!1}},computed:{isloade:function(){return this.imgloade}},methods:{imageonload:function(){return this.imgloade=!0,this.$emit("loaded"),!0}}}),st=rt,ot=(n("3ff4"),Object(u["a"])(st,at,it,!1,null,"2707efe5",null)),ct=ot.exports,lt={props:["src","placeholder","title","description"],data:function(){return{imageContainerWidth:0,imageContainerHeight:0,imageWidth:0,imageHeight:0,disImageX:0,disImageY:0,imageTranslateX:0,imageTranslateY:0,ismounted:!1}},components:{imageLoader:ct},methods:{showWords:function(){var t=this.$refs.title,e=t.clientWidth,n=this.$refs.description,a=n.clientWidth;t.style.opacity=1,n.style.opacity=1,t.style.width=0,n.style.width=0,t.offsetLeft,n.offsetLeft,t.style.width=e+"px",n.style.width=a+"px"},changeImagePosition:function(t){!1!==this.ismounted&&(t.stopPropagation(),this.disImageX=this.imageWidth/this.imageContainerWidth*t.offsetX,this.disImageY=this.imageWidth/this.imageContainerWidth*t.offsetY,this.imageTranslateX=-1*(this.disImageX-t.offsetX),this.imageTranslateY=-1*(this.disImageY-t.offsetY))}},mounted:function(){this.imageContainerWidth=this.$refs.container.clientWidth,this.imageContainerHeight=this.$refs.container.clientHeight,this.imageWidth=this.$refs.image.$el.clientWidth,this.imageHeight=this.$refs.image.$el.clientHeight,this.ismounted=!0}},ut=lt,pt=(n("c5c7"),Object(u["a"])(ut,et,nt,!1,null,"04b5a046",null)),dt=pt.exports,mt={data:function(){return{index:0,mainPageHeight:0,rollNumber:0,imageContainerWidth:0,imageContainerHeight:0}},components:{icon:T,mainPage:dt},created:function(){this.$store.dispatch("mainPageStore/fetchMainPageInfo")},methods:{changePage:function(t){t<=0?this.index=0:t>this.datas.length-1?this.index=this.datas.length-1:this.index=t},wheelChangePage:function(t){t.deltaY>0?(this.rollNumber++,this.rollNumber>2&&(this.changePage(this.index+1),this.rollNumber=0)):t.deltaY<0&&(this.rollNumber--,this.rollNumber<-2&&(this.changePage(this.index-1),this.rollNumber=0))},windowResize:function(){this.mainPageHeight=this.$refs.container.clientHeight}},mounted:function(){this.mainPageHeight=this.$refs.container.clientHeight,window.addEventListener("resize",this.windowResize)},destroyed:function(){window.removeEventListener("resize",this.windowResize)},computed:Object(j["a"])({top:function(){return-this.index*this.mainPageHeight+"px"}},Object(A["b"])("mainPageStore",["datas","loading"]))},gt=mt,ht=(n("1f26"),Object(u["a"])(gt,Z,tt,!1,null,"ff63c7cc",null)),ft=ht.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("HomePageSlot",{style:"background-image: url("+t.bgImg+");background-size:cover;",scopedSlots:t._u([{key:"main",fn:function(){return[n("ArticalList")]},proxy:!0},{key:"right",fn:function(){return[n("ArticalCategoryList")]},proxy:!0}])},[t._v(" // 如果插槽中没有定义main这里不写template会将ArticalList默认插入到 ")])},vt=[],yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isloaded,expression:"isloaded"}],ref:"container",staticClass:"blog-list-container"},[n("ul",t._l(t.datas.rows,(function(e){return n("li",{key:e.id},[e.thumb?n("div",{staticClass:"thumb"},[n("RouterLink",{attrs:{to:{name:"articalDetail",params:{id:e.id}}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumb,expression:"v.thumb"}],attrs:{alt:e.title,title:e.title}})])],1):t._e(),n("div",{staticClass:"main"},[n("RouterLink",{attrs:{to:{name:"articalDetail",params:{id:e.id}}}},[n("h2",[t._v(t._s(e.title))])]),n("div",{staticClass:"aside"},[n("span",[t._v("日期："+t._s(t.dateFormat(e.createDate)))]),n("span",[t._v("浏览："+t._s(e.scanNumber))]),n("span",[t._v("评论："+t._s(e.commentNumber))]),n("RouterLink",{attrs:{to:{name:"categoryBlog",params:{category:e.category.id}}}},[t._v(t._s(e.category.name))])],1),n("div",{staticClass:"desc"},[t._v(" "+t._s(e.description)+" ")])],1)])})),0),t.datas.total?n("Paging",{attrs:{current:t.requestArticalPrams.page,limit:t.requestArticalPrams.limit,visiblePage:10},on:{pageChange:t.handleChangePage}}):t._e()],1)},wt=[],xt=n("1da1"),Ct=(n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.getPages>1?n("div",{staticClass:"paging paging-container"},[n("a",{class:{disabled:1===t.current},on:{click:function(e){return t.pageChange(t.current-1)}}},[t._v("<")]),t._l(t.pageArr,(function(e,a){return n("a",{key:a,class:{active:e===t.current},on:{click:function(n){return t.pageChange(e)}}},[t._v(t._s(e))])})),n("a",{class:{disabled:t.current===t.getPages},on:{click:function(e){return t.pageChange(t.current+1)}}},[t._v(">")])],2):t._e()}),jt=[],_t={props:{current:{type:Number,default:1},total:{type:Number,default:200},limit:{type:Number,default:10},visiblePage:{type:Number,default:10}},computed:{getPages:function(){return Math.ceil(this.total/this.limit)},pageArr:function(){var t=[];if(this.getMaxPage-this.getMinPage<this.limit-1)for(var e=this.getMaxPage,n=e-this.limit+1,a=n;a<=e;a++)t.push(a);else for(var i=this.getMinPage;i<=this.getMaxPage;i++)t.push(i);return t},getMinPage:function(){var t=this.current-this.visiblePage/2;return t<0&&(t=1),t},getMaxPage:function(){var t=this.getMinPage+this.visiblePage-1;return t>this.getPages&&(t=this.getPages),t}},methods:{pageChange:function(t){t<=1?t=1:t>this.getMaxPage&&(t=this.getMaxPage),this.$emit("pageChange",t)}}},kt=_t,St=(n("28c6"),Object(u["a"])(kt,Ct,jt,!1,null,"1fb492b5",null)),Ot=St.exports,$t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{data:function(){return{datas:t,isloaded:!0}},created:function(){var t=this;return Object(xt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.selfGetData();case 2:t.datas=e.sent,t.isloaded=!1;case 4:case"end":return e.stop()}}),e)})))()}}},Pt=n("bc3a"),Tt=n.n(Pt),At=n("96eb"),Dt=n.n(At);Dt.a.mock("/api/mainInfo","get",{code:0,msg:"卧槽居然没拿到",data:[{id:"1",midImg:"http://mdrs.yuanjin.tech/img/20201031141507.jpg",bigImg:"http://mdrs.yuanjin.tech/img/20201031141350.jpg",title:"凛冬将至",description:"人唯有恐惧的时候方能勇敢"},{id:"2",midImg:"http://mdrs.yuanjin.tech/img/20201031205550.jpg",bigImg:"http://mdrs.yuanjin.tech/img/20201031205551.jpg",title:"血火同源",description:"如果我回头，一切都完了"},{id:"3",midImg:"http://mdrs.yuanjin.tech/img/20201031204401.jpg",bigImg:"http://mdrs.yuanjin.tech/img/20201031204403.jpg",title:"听我怒吼",description:"兰尼斯特有债必偿"}]});var Rt=n("ade3"),Et=(n("e133"),n("513f"),n("85a4"),n("84d2"),n("dc40"),n("567c"),n("b383")),Lt=n.n(Et);Dt.a.mock("/api/blogCategory","get",{code:0,msg:"","data|10-20":[{"id|+1":1,name:"分类@id","articleCount|0-300":0,"order|+1":1}]}),Dt.a.mock(/^\/api\/blog(\?.+)?$/,"get",(function(t){Lt.a.parse(t.url);return Dt.a.mock({code:0,msg:"",data:Object(Rt["a"])({"total|2000-3000":0},"rows|".concat(30),[{id:"@guid",title:"@ctitle(5,20)",description:"@cparagraph(1, 10)",category:{"id|1-10":0,name:"分类@id"},"scanNumber|0-3000":0,"commentNumber|0-300":30,thumb:[Dt.a.Random.image("300x250","#50B347","#fFf","fromMockjs")],createDate:"@date('T')"}])})})),Dt.a.mock(/^\/api\/blog\/[^/]+$/,"get",{code:0,msg:"",data:{id:"@guid",title:"CORS跨域方案详解",category:{"id|1-10":1,name:"分类@id"},description:"@cparagraph(1, 10)","scanNumber|0-10000":0,"commentNumber|0-100":0,createDate:"@date('T')",toc:[{name:"概述",anchor:"article-md-title-1"},{name:"简单请求",anchor:"article-md-title-2",children:[{name:"简单请求的判定",anchor:"article-md-title-3"},{name:"简单请求的交互规范",anchor:"article-md-title-4"}]},{name:"需要预检的请求",anchor:"article-md-title-5"},{name:"附带身份凭证的请求",anchor:"article-md-title-6"},{name:"一个额外的补充",anchor:"article-md-title-7"}],"thumb|1":[Dt.a.Random.image("300x250","#000","#fff","Random Image"),null],htmlContent:'<blockquote>\n    <p>阅读本文，你需要首先知道：</p><ol>\n    <li>浏览器的同源策略</li>\n    <li>跨域问题</li>\n    <li>JSONP原理</li>\n    <li>cookie原理</li>\n    </ol>\n    </blockquote>\n    <p>JSONP并不是一个好的跨域解决方案，它至少有着下面两个严重问题：</p><ol>\n    <li><strong>会打乱服务器的消息格式</strong>：JSONP要求服务器响应一段JS代码，但在非跨域的情况下，服务器又需要响应一个正常的JSON格式</li>\n    <li><strong>只能完成GET请求</strong>：JSONP的原理会要求浏览器端生成一个<code>script</code>元素，而<code>script</code>元素发出的请求只能是<code>get</code>请求</li>\n    </ol>\n    <p>所以，CORS是一种更好的跨域解决方案。</p><h1 id="article-md-title-1">概述</h1><p><code>CORS</code>是基于<code>http1.1</code>的一种跨域解决方案，它的全称是<strong>C</strong>ross-<strong>O</strong>rigin <strong>R</strong>esource <strong>S</strong>haring，跨域资源共享。</p><p>它的总体思路是：<strong>如果浏览器要跨域访问服务器的资源，需要获得服务器的允许</strong></p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421152122793.png" title="image-20200421152122793" alt="image-20200421152122793">\n          <figcaption>image-20200421152122793</figcaption>\n      \n        </figure><p>而要知道，一个请求可以附带很多信息，从而会对服务器造成不同程度的影响</p><p>比如有的请求只是获取一些新闻，有的请求会改动服务器的数据</p><p>针对不同的请求，CORS规定了三种不同的交互模式，分别是：</p><ul>\n    <li><strong>简单请求</strong></li>\n    <li><strong>需要预检的请求</strong></li>\n    <li><strong>附带身份凭证的请求</strong></li>\n    </ul>\n    <p>这三种模式从上到下层层递进，请求可以做的事越来越多，要求也越来越严格。</p><p>下面分别说明三种请求模式的具体规范。</p><h1 id="article-md-title-2">简单请求</h1><p>当浏览器端运行了一段ajax代码（无论是使用XMLHttpRequest还是fetch api），浏览器会首先判断它属于哪一种请求模式</p><h2 id="article-md-title-3">简单请求的判定</h2><p>当请求<strong>同时满足</strong>以下条件时，浏览器会认为它是一个简单请求：</p><ol>\n    <li><p><strong>请求方法属于下面的一种：</strong></p><ul>\n    <li>get</li>\n    <li>post</li>\n    <li>head</li>\n    </ul>\n    </li>\n    <li><p><strong>请求头仅包含安全的字段，常见的安全字段如下：</strong></p><ul>\n    <li><code>Accept</code></li>\n    <li><code>Accept-Language</code></li>\n    <li><code>Content-Language</code></li>\n    <li><code>Content-Type</code></li>\n    <li><code>DPR</code></li>\n    <li><code>Downlink</code></li>\n    <li><code>Save-Data</code></li>\n    <li><code>Viewport-Width</code></li>\n    <li><code>Width</code></li>\n    </ul>\n    </li>\n    <li><p><strong>请求头如果包含<code>Content-Type</code>，仅限下面的值之一：</strong></p><ul>\n    <li><code>text/plain</code></li>\n    <li><code>multipart/form-data</code></li>\n    <li><code>application/x-www-form-urlencoded</code></li>\n    </ul>\n    </li>\n    </ol>\n    <p>如果以上三个条件同时满足，浏览器判定为简单请求。</p><p>下面是一些例子：</p><pre><code class="language-js"><span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>);\n    \n    <span class="hljs-comment">// 请求方法不满足要求，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>:<span class="hljs-string">"PUT"</span>\n    })\n    \n    <span class="hljs-comment">// 加入了额外的请求头，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">headers</span>:{\n        <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>\n      }\n    })\n    \n    <span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>\n    })\n    \n    <span class="hljs-comment">// content-type不满足要求，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>,\n      <span class="hljs-attr">headers</span>: {\n        <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>\n      }\n    })</code></pre>\n    <h2 id="article-md-title-4">简单请求的交互规范</h2><p>当浏览器判定某个<strong>ajax跨域请求</strong>是<strong>简单请求</strong>时，会发生以下的事情</p><ol>\n    <li><strong>请求头中会自动添加<code>Origin</code>字段</strong></li>\n    </ol>\n    <p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p><pre><code class="language-js"><span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>);</code></pre>\n    <p>请求发出后，请求头会是下面的格式：</p><pre><code>GET /api/news/ HTTP/1.1\n    Host: crossdomain.com\n    Connection: keep-alive\n    ...\n    Referer: http://my.com/index.html\n    Origin: http://my.com</code></pre><p>看到最后一行没，<code>Origin</code>字段会告诉服务器，是哪个源地址在跨域请求</p><ol start="2">\n    <li><strong>服务器响应头中应包含<code>Access-Control-Allow-Origin</code></strong></li>\n    </ol>\n    <p>当服务器收到请求后，如果允许该请求跨域访问，需要在响应头中添加<code>Access-Control-Allow-Origin</code>字段</p><p>该字段的值可以是：</p><ul>\n    <li>*：表示我很开放，什么人我都允许访问</li>\n    <li>具体的源：比如<code>http://my.com</code>，表示我就允许你访问</li>\n    </ul>\n    <blockquote>\n    <p>实际上，这两个值对于客户端<code>http://my.com</code>而言，都一样，因为客户端才不会管其他源服务器允不允许，就关心自己是否被允许</p><p>当然，服务器也可以维护一个可被允许的源列表，如果请求的<code>Origin</code>命中该列表，才响应<code>*</code>或具体的源</p><p><strong>为了避免后续的麻烦，强烈推荐响应具体的源</strong></p></blockquote>\n    <p>假设服务器做出了以下的响应：</p><pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    ...\n    \n    消息体中的数据</code></pre><p>当浏览器看到服务器允许自己访问后，高兴的像一个两百斤的孩子，于是，它就把响应顺利的交给js，以完成后续的操作</p><p>下图简述了整个交互过程</p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421162846480.png" title="image-20200421162846480" alt="image-20200421162846480">\n          <figcaption>image-20200421162846480</figcaption>\n      \n        </figure><h1 id="article-md-title-5">需要预检的请求</h1><p>简单的请求对服务器的威胁不大，所以允许使用上述的简单交互即可完成。</p><p>但是，如果浏览器不认为这是一种简单请求，就会按照下面的流程进行：</p><ol>\n    <li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n    <li><strong>服务器允许</strong></li>\n    <li><strong>浏览器发送真实请求</strong></li>\n    <li><strong>服务器完成真实的响应</strong></li>\n    </ol>\n    <p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p><pre><code class="language-js"><span class="hljs-comment">// 需要预检的请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/user"</span>, {\n      <span class="hljs-attr">method</span>:<span class="hljs-string">"POST"</span>, <span class="hljs-comment">// post 请求</span>\n      <span class="hljs-attr">headers</span>:{  <span class="hljs-comment">// 设置请求头</span>\n        <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,\n        <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>,\n        <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>\n      },\n      <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">name</span>: <span class="hljs-string">"袁小进"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> }) <span class="hljs-comment">// 设置请求体</span>\n    });</code></pre>\n    <p>浏览器发现它不是一个简单请求，则会按照下面的流程与服务器交互</p><ol>\n    <li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n    </ol>\n    <pre><code>OPTIONS /api/user HTTP/1.1\n    Host: crossdomain.com\n    ...\n    Origin: http://my.com\n    Access-Control-Request-Method: POST\n    Access-Control-Request-Headers: a, b, content-type</code></pre><p>可以看出，这并非我们想要发出的真实请求，请求中不包含我们的响应头，也没有消息体。</p><p>这是一个预检请求，它的目的是询问服务器，是否允许后续的真实请求。</p><p>预检请求<strong>没有请求体</strong>，它包含了后续真实请求要做的事情</p><p>预检请求有以下特征：</p><ul>\n    <li>请求方法为<code>OPTIONS</code></li>\n    <li>没有请求体</li>\n    <li>请求头中包含<ul>\n    <li><code>Origin</code>：请求的源，和简单请求的含义一致</li>\n    <li><code>Access-Control-Request-Method</code>：后续的真实请求将使用的请求方法</li>\n    <li><code>Access-Control-Request-Headers</code>：后续的真实请求会改动的请求头</li>\n    </ul>\n    </li>\n    </ul>\n    <ol start="2">\n    <li><strong>服务器允许</strong></li>\n    </ol>\n    <p>服务器收到预检请求后，可以检查预检请求中包含的信息，如果允许这样的请求，需要响应下面的消息格式</p><pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    Access-Control-Allow-Methods: POST\n    Access-Control-Allow-Headers: a, b, content-type\n    Access-Control-Max-Age: 86400\n    ...</code></pre><p>对于预检请求，不需要响应任何的消息体，只需要在响应头中添加：</p><ul>\n    <li><code>Access-Control-Allow-Origin</code>：和简单请求一样，表示允许的源</li>\n    <li><code>Access-Control-Allow-Methods</code>：表示允许的后续真实的请求方法</li>\n    <li><code>Access-Control-Allow-Headers</code>：表示允许改动的请求头</li>\n    <li><code>Access-Control-Max-Age</code>：告诉浏览器，多少秒内，对于同样的请求源、方法、头，都不需要再发送预检请求了</li>\n    </ul>\n    <ol start="3">\n    <li><strong>浏览器发送真实请求</strong></li>\n    </ol>\n    <p>预检被服务器允许后，浏览器就会发送真实请求了，上面的代码会发生下面的请求数据</p><pre><code>POST /api/user HTTP/1.1\n    Host: crossdomain.com\n    Connection: keep-alive\n    ...\n    Referer: http://my.com/index.html\n    Origin: http://my.com\n    \n    {"name": "袁小进", "age": 18 }</code></pre><ol start="4">\n    <li><strong>服务器响应真实请求</strong></li>\n    </ol>\n    <pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    ...\n    \n    添加用户成功</code></pre><p>可以看出，当完成预检之后，后续的处理与简单请求相同</p><p>下图简述了整个交互过程</p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421165913320.png" title="image-20200421165913320" alt="image-20200421165913320">\n          <figcaption>image-20200421165913320</figcaption>\n      \n        </figure><h1 id="article-md-title-6">附带身份凭证的请求</h1><p>默认情况下，ajax的跨域请求并不会附带cookie，这样一来，某些需要权限的操作就无法进行</p><p>不过可以通过简单的配置就可以实现附带cookie</p><pre><code class="language-js"><span class="hljs-comment">// xhr</span>\n    <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();\n    xhr.withCredentials = <span class="hljs-literal">true</span>;\n    \n    <span class="hljs-comment">// fetch api</span>\n    fetch(url, {\n      <span class="hljs-attr">credentials</span>: <span class="hljs-string">"include"</span>\n    })</code></pre>\n    <p>这样一来，该跨域的ajax请求就是一个<em>附带身份凭证的请求</em></p><p>当一个请求需要附带cookie时，无论它是简单请求，还是预检请求，都会在请求头中添加<code>cookie</code>字段</p><p>而服务器响应时，需要明确告知客户端：服务器允许这样的凭据</p><p>告知的方式也非常的简单，只需要在响应头中添加：<code>Access-Control-Allow-Credentials: true</code>即可</p><p>对于一个附带身份凭证的请求，若服务器没有明确告知，浏览器仍然视为跨域被拒绝。</p><p>另外要特别注意的是：<strong>对于附带身份凭证的请求，服务器不得设置 <code>Access-Control-Allow-Origin 的值为*</code></strong>。这就是为什么不推荐使用*的原因</p><h1 id="article-md-title-7">一个额外的补充</h1><p>在跨域访问时，JS只能拿到一些最基本的响应头，如：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma，如果要访问其他头，则需要服务器设置本响应头。</p><p><code>Access-Control-Expose-Headers</code>头让服务器把允许浏览器访问的头放入白名单，例如：</p><pre><code>Access-Control-Expose-Headers: authorization, a, b</code></pre><p>这样JS就能够访问指定的响应头了。</p>'}}),Dt.a.mock("/api/comment","post",{code:0,msg:"",data:{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar6.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar4.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar8.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar2.jpg"]}}),Dt.a.mock(/^\/api\/comment\/?(\?.+)?$/,"get",(function(t){var e=Lt.a.parse(t.url);return Dt.a.mock({code:0,msg:"",data:Object(Rt["a"])({"total|50":0},"rows|".concat(e.limit||10),[[{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["/showblog/image/portrait1.webp","/showblog/image/portrait2.webp","/showblog/image/portrait3.webp","/image/portrait4.webp","/image/portrait5.webp","/image/portrait6.webp"]},{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["/showblog/image/portrait1.webp","/showblog/image/portrait2.webp","/showblog/image/portrait3.webp","/showblog/image/portrait4.webp","/showblog/image/portrait5.webp","/showblog/image/portrait6.webp"]},{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["/showblog/image/portrait1.webp","/showblog/image/portrait2.webp","/showblog/image/portrait3.webp","/showblog/image/portrait4.webp","/showblog/image/portrait5.webp","/showblog/image/portrait6.webp"]},{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["/showblog/image/portrait1.webp","/showblog/image/portrait2.webp","/showblog/image/portrait3.webp","/showblog/image/portrait4.webp","/showblog/image/portrait5.webp","/showblog/image/portrait6.webp"]},{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["/showblog/image/portrait1.webp","/showblog/image/portrait2.webp","/showblog/image/portrait3.webp","/showblog/image/portrait4.webp","/showblog/image/portrait5.webp","/showblog/image/portrait6.webp"]}]])})})),Dt.a.mock("/api/setting","get",{code:0,msg:"",data:{avatar:"http://www.duyiedu.com/source/img/logo.png",siteTitle:"我的个人空间",github:"github.com",qq:"2912824087",qqQrCode:"http://www.duyiedu.com/source/img/%E5%B0%8F%E6%B8%A1%E5%BE%AE%E4%BF%A1%E4%BA%8C%E7%BB%B4%E7%A0%81.png",weixin:"rsbgesey",weixinQrCode:"http://www.duyiedu.com/source/img/%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.png",mail:"duyi@gmail.com",icp:"黑ICP备17001719号",githubName:"DuYi-Edu",favicon:"http://mdrs.yuanjin.tech/Fs4CDlC6mwe_WXLMIiXcmSJLHO4f"}}),Dt.a.mock("/api/about","get",{code:0,msg:"",data:"http://www.mobanwang.com/mb/202010/17761.html"}),Dt.a.mock(/^\/api\/project\/?$/,"get",{code:0,msg:"","data|10-20":[{id:"@uuid",name:"@ctitle(1, 10)","url|1":["@url",null],"github|1":["@url",null],"description|1-4":["@cparagraph(1, 5)"],thumb:"@image(300x250, @color, #000, @natural,fromMockjs)"}]}),Dt.a.mock("/api/leaveMessage","get",{code:0,msg:"",data:Object(Rt["a"])({"total|50":0},"rows|10",[[{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),avatar:["/showblog/image/portrait1","/showblog/image/portrait2","/showblog/image/portrait3","/showblog/image/portrait4","/showblog/image/portrait5","/showblog/image/portrait6"]}]])}),Dt.a.setup({timeout:"1000"});var qt=function(t,e){var n=new a["a"]({render:function(n){return n(t,{props:e})}});return n.$mount(),n.$el},It=n("7890"),Mt=n.n(It),Nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.type=t.type?t.type:"error",t.parent=t.parent?t.parent:document.body,t.message=t.message?t.message:"没有输入";var e=document.createElement("div"),n=document.createElement("span"),a=t.parent;n.innerText=t.message;var i=qt(T,{type:t.type});function r(){this.remove()}"success"===t.type?i.style.color="green":"error"===t.type&&(i.style.color="red"),e.className=Mt.a.showMessage,e.appendChild(i),a.appendChild(e).appendChild(n),"static"===getComputedStyle(a).position&&(a.style.position="relative"),e.offsetLeft,e.style.opacity=1,e.style.marginTop="-25px",e.style.left,setTimeout((function(){e.style.opacity=0,e.style.marginTop="0px",e.addEventListener("transitionend",r),t.callback&&t.callback()}),t.duration)},Ht=(n("99af"),n("4d90"),n("d3b7"),n("25f0"),function(t){var e=new Date(Number(t));return"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0"))}),Bt=function(t,e){var n=null;return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];clearTimeout(n),n=setTimeout((function(){t.apply(void 0,i)}),e)}},zt=Tt.a.create();zt.interceptors.response.use((function(t){return 0!==t.data.code?(Nt({type:"error",message:t.data.msg}),t.data.code):t.data.data}));var Wt=zt;function Gt(){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(xt["a"])(regeneratorRuntime.mark((function t(){var e,n,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1&&void 0!==i[1]?i[1]:10,a=i.length>2&&void 0!==i[2]?i[2]:-1,t.next=5,Wt.get("/api/blog",{params:{page:e,limit:n,categoryId:a}});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),Ft.apply(this,arguments)}function Jt(){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(xt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt.get("/api/blogCategory");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),Xt.apply(this,arguments)}function Yt(t){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(xt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt.get("/api/blog/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),Kt.apply(this,arguments)}function Ut(t){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(xt["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt.post("/api/comment",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),Qt.apply(this,arguments)}function Vt(){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(xt["a"])(regeneratorRuntime.mark((function t(){var e,n,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1&&void 0!==i[1]?i[1]:10,a=i.length>2?i[2]:void 0,t.next=5,Wt.get("/api/comment",{params:{page:e,limit:n,blogid:a}});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),Zt.apply(this,arguments)}var te={mixins:[$t({})],components:{Paging:Ot},methods:{selfGetData:function(){var t=this;return Object(xt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Gt(t.requestArticalPrams.page,t.requestArticalPrams.limit,t.requestArticalPrams.categoryId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},dateFormat:Ht,handleChangePage:function(t){var e={page:t,limit:this.requestArticalPrams.limit};-1===this.requestArticalPrams.categoryId?this.$router.push({name:"blog",query:e}):this.$router.push({name:"categoryBlog",query:e,params:{cate:this.requestArticalPrams.categoryId}})},handleScroll:function(){this.$bus.$emit("mainScroll",this.$refs.container)}},computed:{requestArticalPrams:function(){return{page:Number(this.$route.query.page)||1,limit:+this.$route.query.limit||10,categoryId:+this.$route.params.category||-1}}},mounted:function(){this.$refs.container.addEventListener("scroll",this.handleScroll)},beforeDestoryed:function(){this.$refs.container.removeEventListener("scroll",this.handleScroll)},watch:{$route:function(){var t=this;return Object(xt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.container.scrollTop=0,t.isloaded=!0,e.next=4,t.selfGetData();case 4:t.datas=e.sent,t.isloaded=!1;case 6:case"end":return e.stop()}}),e)})))()}}},ee=te,ne=(n("b19b"),Object(u["a"])(ee,yt,wt,!1,null,"06966f9c",null)),ae=ne.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isloaded,expression:"isloaded"}],staticClass:"articalCategoryList-container"},[n("h2",[t._v("文章分类")]),n("RightList",{attrs:{list:t.list},on:{select:t.handleSelect}})],1)},re=[],se=n("2909"),oe=(n("d81d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"articalRightList-container"},t._l(t.list,(function(e,a){return n("li",{key:a},[n("span",{class:{active:e.isSelected},on:{click:function(n){return t.select(e)}}},[t._v(t._s(e.name))]),n("ArticalRightList",{attrs:{list:e.children},on:{select:t.select}})],1)})),0)}),ce=[],le={name:"ArticalRightList",props:{list:{type:Array,default:function(){return[]}}},methods:{select:function(t){this.$emit("select",t)}}},ue=le,pe=(n("fadf"),Object(u["a"])(ue,oe,ce,!1,null,"bda48664",null)),de=pe.exports,me={mixins:[$t([])],computed:{getBlogCategory:function(){return+this.$route.params.category||-1},list:function(){var t=this,e=this.datas.reduce((function(t,e){return t.articalCount+e.articalCount}),0),n=[{name:"全部",id:-1,articalCount:e}].concat(Object(se["a"])(this.datas));return n.map((function(e){return Object(j["a"])(Object(j["a"])({},e),{},{isSelected:e.id===t.getBlogCategory})}))}},components:{RightList:de},methods:{selfGetData:function(){return Object(xt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Jt();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},handleSelect:function(t){var e={page:1,limit:+this.$route.query.limit||10};-1===t.id?this.$router.push({name:"blog",query:e}):this.$router.push({name:"categoryBlog",query:e,params:{category:t.id}})}}},ge=me,he=(n("1fd6"),Object(u["a"])(ge,ie,re,!1,null,"1234a094",null)),fe=he.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.backToTop,expression:"backToTop"}],staticClass:"backToTop",on:{click:t.handleClick}},[t._v("↑")])},ve=[],ye={data:function(){return{backToTop:!1}},created:function(){this.$bus.$emit("mainClick"),this.$bus.$on("mainScroll",this.handleScroll)},methods:{handleScroll:function(t){t.scrollTop>1e3?this.backToTop=!0:t.scrollTop<10&&(this.backToTop=!1)},handleClick:function(){this.$bus.$emit("toTop")}}},we=ye,xe=(n("e5a4"),Object(u["a"])(we,be,ve,!1,null,null,null)),Ce=xe.exports,je={components:{ArticalList:ae,HomePageSlot:d,ArticalCategoryList:fe},data:function(){return{bgImg:n("1100")}}},_e=je,ke=(n("0480"),Object(u["a"])(_e,bt,vt,!1,null,"4dfbb56f",null)),Se=ke.exports,Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aboutContainer"},[n("img",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],attrs:{src:"/showblog/image/about2.jpg",alt:""}})])},$e=[];function Pe(){return Te.apply(this,arguments)}function Te(){return Te=Object(xt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt.get("/api/about");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),Te.apply(this,arguments)}var Ae={mixins:[$t({})],data:function(){return{}},methods:{selfGetData:function(){return Object(xt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pe();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))()}}},De=Ae,Re=(n("10dd"),Object(u["a"])(De,Oe,$e,!1,null,null,null)),Ee=Re.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isloaded,expression:"isloaded"}],ref:"projectContainer",staticClass:"project-container"},[t._l(t.datas,(function(e){return n("div",{key:e.id,staticClass:"project-item"},[n("a",{attrs:{href:e.url?e.url:"javascript:alert('该项目无法通过外网访问')",target:e.url?"_blank":"_self"}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumb,expression:"item.thumb"}],staticClass:"thumb"})]),n("div",{staticClass:"info"},[n("h2",[n("a",{attrs:{href:e.url?e.url:"javascript:alert('该项目无法通过外网访问')",target:e.url?"_blank":"_self"}},[t._v(" "+t._s(e.name)+" ")])]),e.github?n("a",{staticClass:"github",attrs:{target:"_blank",href:e.github}},[t._v(" github ")]):t._e(),t._l(e.description,(function(e,a){return n("p",{key:a},[t._v(" "+t._s(e)+" ")])}))],2)])})),n("BackToTop")],2)},qe=[];function Ie(){return Me.apply(this,arguments)}function Me(){return Me=Object(xt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt.get("/api/project");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),Me.apply(this,arguments)}var Ne=function(t){return{mounted:function(){this.$refs[t].addEventListener("scroll",this.handleScroll),this.$bus.$on("toTop",this.handleClick)},destoryed:function(){this.$refs.removeEventListener("scroll",this.handleScroll),this.$bus.$off("toTop",this.handleClick)}}},He={components:{BackToTop:Ce},mixins:[$t([]),Ne("projectContainer")],methods:{selfGetData:function(){return Object(xt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ie();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))()},handleScroll:function(){this.$bus.$emit("mainScroll",this.$refs.projectContainer)},handleClick:function(){console.log(this.$refs.projectContainer),this.$refs.projectContainer.scrollTop=0}},created:function(){this.$bus.$on("toTop",this.handleClick)},beforeDestory:function(){this.$bus.$off("toTop",this.handleClick)}},Be=He,ze=(n("fa68"),Object(u["a"])(Be,Le,qe,!1,null,"cbb70cfa",null)),We=ze.exports,Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leaveMessage-container"},[n("Comment")],1)},Fe=[],Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"commentContainer",staticClass:"blog-comment-container"},[n("MessageArea",{attrs:{title:"评论列表",subTitle:"("+t.datas.total+")",list:t.datas.rows,isListLoading:t.isloaded,haveData:t.noMoreComment},on:{submit:t.handleSubmit}})],1)},Xe=[],Ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message-area-container"},[n("CommentForm",t._g({},t.$listeners)),n("h3",[t._v(" "+t._s(t.title)+" "),n("span",[t._v(t._s(t.subTitle))])]),n("CommentList",{attrs:{list:t.list}}),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isListLoading,expression:"isListLoading"}],staticClass:"loading"}),t.haveData?n("div",{staticClass:"data",staticStyle:{"background-color":"red:"}},[t._v("没有更多了评论了！")]):t._e()],1)},Ke=[],Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",staticClass:"data-form-container",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"input-area"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.nickname,expression:"formData.nickname"}],attrs:{type:"text",maxlength:"10",placeholder:"用户昵称"},domProps:{value:t.formData.nickname},on:{input:function(e){e.target.composing||t.$set(t.formData,"nickname",e.target.value)}}}),n("span",{staticClass:"tip"},[t._v(t._s(t.formData.nickname.length)+"/10")])]),n("div",{staticClass:"error"},[t._v(t._s(t.error.nickname))])]),n("div",{staticClass:"form-item"},[n("div",{staticClass:"text-area"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.content,expression:"formData.content"}],attrs:{maxlength:"300",placeholder:"输入内容"},domProps:{value:t.formData.content},on:{input:function(e){e.target.composing||t.$set(t.formData,"content",e.target.value)}}}),n("span",{staticClass:"tip"},[t._v(t._s(t.formData.content.length)+"/300")])]),n("div",{staticClass:"error"},[t._v(t._s(t.error.content))])]),n("div",{staticClass:"form-item"},[n("div",{staticClass:"button-area"},[n("button",{attrs:{disabled:t.isSubmiting}},[t._v(" "+t._s(t.isSubmiting?"提交中...":"提交")+" ")])])])])},Qe=[],Ve={data:function(){return{formData:{nickname:"",content:""},error:{nickname:"",content:""},isSubmiting:!1}},methods:{handleSubmit:function(){var t=this;this.error.nickname=this.formData.nickname?"":"请填写昵称",this.error.content=this.formData.content?"":"请填写内容",this.error.nickname||this.error.content||(this.isSubmiting=!0,this.$emit("submit",this.formData,(function(e){console.log(e),t.$showMessage({message:e,type:"success",duration:1e3,parent:t.$refs.form,callback:function(){console.log(999999),t.isSubmiting=!1,t.formData.nickname="",t.formData.content=""}})})))}}},Ze=Ve,tn=(n("049d"),Object(u["a"])(Ze,Ue,Qe,!1,null,"4a57e8de",null)),en=tn.exports,nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"data-list-container"},t._l(t.list,(function(e){return n("li",{key:e.id},[n("Avatar",{staticStyle:{width:"45px",height:"45px","margin-right":"20px"},attrs:{src:e.avatar}}),n("div",{staticClass:"data"},[n("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),n("div",{staticClass:"time"},[t._v(t._s(t.dateFormat(e.createDate,!0)))])])],1)})),0)},an=[],rn={components:{Avatar:w},props:{list:{type:Array,default:function(){return[]}}},methods:{dateFormat:Ht}},sn=rn,on=(n("305e"),Object(u["a"])(sn,nn,an,!1,null,"5ef8ce31",null)),cn=on.exports,ln={props:{title:{type:String,default:""},subTitle:{type:String,default:""},list:{type:Array,default:function(){return[]}},isListLoading:{type:Boolean,default:!1},haveData:{type:Boolean,default:!1}},components:{CommentForm:en,CommentList:cn}},un=ln,pn=(n("1276"),Object(u["a"])(un,Ye,Ke,!1,null,"2369c02d",null)),dn=pn.exports,mn={mixins:[$t({})],components:{MessageArea:dn},data:function(){return{page:1,limit:10,noMoreComment:!1}},created:function(){this.$bus.$on("mainScroll",this.handleScroll)},methods:{selfGetData:function(){var t=this;return Object(xt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Vt(t.$route.params.id,t.page,t.limit);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()},getMoreData:function(){var t=this;return Object(xt["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isloaded=!0,!(t.datas.total<=t.datas.rows.length)){e.next=5;break}return t.isloaded=!1,t.noMoreComment=!0,e.abrupt("return");case 5:return e.next=7,t.selfGetData();case 7:n=e.sent,a=t.datas.rows.concat(n.rows),t.datas.rows=a,t.isloaded=!1;case 11:case"end":return e.stop()}}),e)})))()},handleSubmit:function(t,e){var n=this;return Object(xt["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ut(Object(j["a"])({blogId:n.$route.params.id},t));case 2:i=a.sent,n.datas.rows.unshift(i),n.datas.total++,e("评论成功");case 6:case"end":return a.stop()}}),a)})))()},handleScroll:function(t){this.isloaded||t.scrollTop+document.documentElement.clientHeight+100>t.scrollHeight&&this.getMoreData()},beforeDestory:function(){this.$bus.$off("mainScroll",this.handleScroll)}}},gn=mn,hn=(n("21fd"),Object(u["a"])(gn,Je,Xe,!1,null,"7f9090e3",null)),fn=hn.exports,bn={data:function(){return{overflow:!0}},components:{Comment:fn}},vn=bn,yn=(n("b5d9"),Object(u["a"])(vn,Ge,Fe,!1,null,"1eb59ef1",null)),wn=yn.exports,xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("HomePageSlot",{style:"background-image: url("+t.bgImg+");background-size:cover;",scopedSlots:t._u([{key:"main",fn:function(){return[n("div",{ref:"detailContainer",staticClass:"detailComment"},[n("ArticalDetail",{attrs:{datas:t.datas}}),n("Comment")],1)]},proxy:!0},{key:"right",fn:function(){return[n("RightListDetail",{attrs:{datas:t.datas.toc}}),n("BackToTop")]},proxy:!0}])})},Cn=[],jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"articalDetail-container"},[n("h1",[t._v(t._s(t.datas.title))]),n("div",{staticClass:"articalInfo"},[n("span",[t._v("浏览量："+t._s(t.datas.scanNumber))]),n("a",{attrs:{href:"#leaveComment"}},[t._v("评论："+t._s(t.datas.commentNumber))]),n("RouterLink",{attrs:{to:{name:"categoryBlog",params:{category:t.datas.category?t.datas.category.id:"获取中"}}}},[t._v("分类："+t._s(t.datas.category?t.datas.category.name:"正在获取"))]),n("span",[t._v("发表时间："+t._s(t.datas.createDate?t.dateFormat(t.datas.createDate):"正在获取"))])],1),n("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.datas.htmlContent)}}),n("h2",{attrs:{id:"leaveComment"}},[t._v("留下评论再走吧！")])])},_n=[],kn={components:{Comment:dn},props:{datas:{require:!0}},methods:{dateFormat:Ht}},Sn=kn,On=(n("286b"),Object(u["a"])(Sn,jn,_n,!1,null,"75eda54e",null)),$n=On.exports,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rightListDetail-container"},[n("RightList",{attrs:{list:t.addSelected},on:{select:t.handleSelect}})],1)},Tn=[],An=n("b85c"),Dn=(n("18a5"),{data:function(){return{listId:""}},components:{RightList:de},props:{datas:{type:Array,require:!0}},methods:{handleSelect:function(t){location.hash=t.anchor},setSelected:function(){var t,e=this.getTitleDoms,n=Object(An["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a){var i=a.getBoundingClientRect().top;i<100&&(this.listId=a.id)}}}catch(r){n.e(r)}finally{n.f()}}},computed:{addSelected:function(){var t=this,e=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.map((function(n){return Object(j["a"])(Object(j["a"])({},n),{},{isSelected:n.anchor===t.listId,children:e(n.children)})}))};return e(this.datas)},getTitleDoms:function(){var t=[],e=function e(){var n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=Object(An["a"])(a);try{for(i.s();!(n=i.n()).done;){var r=n.value,s=document.getElementById(r.anchor);t.push(s),r.children&&r.children.length>0&&e(r.children)}}catch(o){i.e(o)}finally{i.f()}};return e(this.datas),t}},created:function(){this.debounceScroll=Bt(this.setSelected,50),this.$bus.$on("mainScroll",this.debounceScroll)},mounted:function(){var t=location.hash;location.hash="",this.timer=setTimeout((function(){location.hash=t}),2e3)},destoryed:function(){this.$bus.$off("mainScroll",this.debounceScroll)}}),Rn=Dn,En=(n("a5a9"),Object(u["a"])(Rn,Pn,Tn,!1,null,null,null)),Ln=En.exports,qn="",In="";function Mn(){document.title=qn||In?qn&&!In?qn:!qn&&In?In:qn+"-"+In:"loading..."}var Nn={setRouteTitle:function(t){qn=t,Mn()},setSiteTitle:function(t){In=t,Mn()}},Hn={mixins:[$t({}),Ne("detailContainer")],data:function(){return{bgImg:n("1100")}},mounted:function(){},components:{HomePageSlot:d,ArticalDetail:$n,RightListDetail:Ln,Comment:fn,BackToTop:Ce},methods:{selfGetData:function(){var t=this;return Object(xt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Yt(t.$route.params.id);case 2:return n=e.sent,Nn.setSiteTitle(n.title),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},handleScroll:function(){this.$bus.$emit("mainScroll",this.$refs.detailContainer)},handleClick:function(){this.$refs.detailContainer.scrollTop=0}}},Bn=Hn,zn=(n("07fe"),Object(u["a"])(Bn,xn,Cn,!1,null,"06226fe8",null)),Wn=zn.exports,Gn=[{name:"main",path:"/index.html",component:ft,meta:{title:"首页"}},{name:"blog",path:"/blog",component:Se,meta:{title:"文章"}},{name:"categoryBlog",path:"/blog/cate/:category",component:Se},{name:"articalDetail",path:"/blog/:id",component:Wn,meta:{title:"文章详情"}},{name:"about",path:"/about",component:Ee,meta:{title:"关于"}},{name:"project",path:"/project",component:We,meta:{title:"项目&效果"}},{name:"message",path:"/message",component:wn,meta:{title:"留言板"}}];a["a"].use(V["a"]);var Fn=new V["a"]({routes:Gn,mode:"history"});Fn.afterEach((function(t,e){t.meta.title&&Nn.setRouteTitle(t.meta.title)}));var Jn=Fn,Xn=n("8d0d"),Yn=n.n(Xn);function Kn(){var t=document.createElement("img");return t.src="/showblog/image/loading.svg",t.dataset.msg="imageloader",t.className=Yn.a.loading,t}function Un(t){return t.querySelector("img[data-msg=imageloader]")}var Qn=function(t,e){var n=Kn(),a=Un(t);if(e.value)Un(t)||t.appendChild(n);else{if(!a)return;a.remove()}},Vn=new a["a"]({});a["a"].prototype.$bus=Vn;var Zn=Vn,ta=n("8ef2"),ea=n.n(ta),na=[];function aa(){var t,e=Object(An["a"])(na);try{for(e.s();!(t=e.n()).done;){var n=t.value,a=n.el.getBoundingClientRect().top,i=150,r=document.documentElement.clientHeight;(a<r||a<-i)&&(n.el.src=n.src)}}catch(s){e.e(s)}finally{e.f()}}function ia(){aa()}Zn.$on("mainScroll",Bt(ia,100));var ra={bind:function(t,e){t.src="/showblog/image/loadingImg.gif",t.classList.add(ea.a.lazyImg),na.push({el:t,src:e.value})},unbind:function(t){na=[]}};function sa(){return oa.apply(this,arguments)}function oa(){return oa=Object(xt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt.get("/api/setting");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),oa.apply(this,arguments)}var ca={namespaced:!0,state:{loading:!1,data:null},mutations:{setLoading:function(t,e){t.loading=e},setData:function(t,e){t.data=e}},actions:{getSetting:function(t){return Object(xt["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("setLoading",!0),e.next=3,sa();case 3:if(n=e.sent,t.commit("setData",n),t.commit("setLoading",!1),!n.favicon){e.next=14;break}if(a=document.querySelector("link[ref='shortcut icon']"),!a){e.next=10;break}return e.abrupt("return");case 10:a=document.createElement("link"),a.rel="icon",a.href=n.favicon,document.querySelector("head").appendChild(a);case 14:n.siteTitle&&Nn.setSiteTitle(n.siteTitle);case 15:case"end":return e.stop()}}),e)})))()}}};function la(){return ua.apply(this,arguments)}function ua(){return ua=Object(xt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt.get("/api/mainInfo");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),ua.apply(this,arguments)}var pa={namespaced:!0,state:{loading:!1,datas:[],isoverflow:!0},mutations:{setLoading:function(t,e){t.loading=e},setData:function(t,e){t.datas=e},setIsoverflow:function(t,e){t.isoverflow=e}},actions:{fetchMainPageInfo:function(t){return Object(xt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.state.datas.length){e.next=2;break}return e.abrupt("return");case 2:return t.commit("setLoading",!0),e.next=5,la();case 5:n=e.sent,t.commit("setData",n),t.commit("setLoading",!1);case 8:case"end":return e.stop()}}),e)})))()}}};a["a"].use(A["a"]);var da=new A["a"].Store({modules:{setting:ca,mainPageStore:pa},strict:!0});da.dispatch("setting/getSetting"),a["a"].prototype.$showMessage=Nt,a["a"].directive("loading",Qn),a["a"].directive("lazy",ra),new a["a"]({store:da,router:Jn,render:function(t){return t(Q)}}).$mount("#app")},"5ecd":function(t,e,n){},"62a8":function(t,e,n){},"62ef":function(t,e,n){},"6f0e":function(t,e,n){"use strict";n("75ef")},"6f86":function(t,e,n){"use strict";n("fb4c")},"6fe5":function(t,e,n){},7254:function(t,e,n){},7455:function(t,e,n){"use strict";n("b2ef")},"75ef":function(t,e,n){},"77b0":function(t,e,n){},7890:function(t,e,n){t.exports={showMessage:"index-module_showMessage_GeJ-S"}},"84d2":function(t,e,n){t.exports=n.p+"img/portrait4.38a03de7.webp"},"85a4":function(t,e,n){t.exports=n.p+"img/portrait3.9156f8cc.webp"},"8c87":function(t,e,n){},"8d0d":function(t,e,n){t.exports={loading:"loadingClass-module_loading_3gKOP"}},"8ee1":function(t,e,n){},"8ef2":function(t,e,n){t.exports={lazyImg:"lazyImg-module_lazyImg_3JiTc"}},"952f":function(t,e,n){},9858:function(t,e,n){},"99c9":function(t,e,n){t.exports=n.p+"img/portraitmy.89efb13f.jpg"},a5a9:function(t,e,n){"use strict";n("3a6b")},ac58:function(t,e,n){},b19b:function(t,e,n){"use strict";n("1baa")},b2ef:function(t,e,n){},b5d0:function(t,e,n){},b5d9:function(t,e,n){"use strict";n("1ab3")},bd61:function(t,e,n){"use strict";n("8c87")},c0dd:function(t,e,n){"use strict";n("f4c7")},c5c7:function(t,e,n){"use strict";n("ac58")},dc40:function(t,e,n){t.exports=n.p+"img/portrait5.3792bacb.webp"},e133:function(t,e,n){t.exports=n.p+"img/portrait1.5de6f77e.webp"},e5a4:function(t,e,n){"use strict";n("9858")},efac:function(t,e,n){},f4c7:function(t,e,n){},fa68:function(t,e,n){"use strict";n("5611")},fadf:function(t,e,n){"use strict";n("5ecd")},fb4c:function(t,e,n){}});
//# sourceMappingURL=app.80232f17.js.map